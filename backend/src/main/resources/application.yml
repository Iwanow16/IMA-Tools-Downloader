# Consolidated application configuration
server:
  port: 8080

spring:
  application:
    name: ima-downloader-backend

app:
  version: 1.0.0
  environment: prod
  temp-dir: /app/temp
  output-dir: /app/downloads
  log-dir: /app/logs
  config-dir: /app/config

downloader:
  max-concurrent-downloads: 3
  max-concurrent-per-ip: 2
  max-queue-size: 100
  download-timeout-minutes: 60
  yt-dlp-path: /usr/local/bin/yt-dlp
  ffmpeg-path: /usr/local/bin/ffmpeg
  cleanup-enabled: true
  cleanup-interval-hours: 6
  temp-file-max-age-hours: 24
  completed-file-max-age-days: 30
  rate-limit-per-ip: 20
  rate-limit-window-minutes: 1
  allowed-domains:
    - youtube.com
    - youtu.be
  default-quality: best
  default-audio-quality: 192k
  enable-subtitles: false
  enable-thumbnail: true

# Service configuration
services:
  youtube:
    enabled: false
    description: "YouTube video downloader"
  bilibili:
    enabled: true
    description: "Bilibili video downloader"

# YouTube configuration
youtube:
  cookies-file: /app/resources/site_cookies.txt
  js-runtime: node
  use-remote-components: true
  merge-audio: false

logging:
  config: classpath:logback-spring.xml
  level:
    root: INFO
  file:
    name: /app/logs/app.log
    max-size: 20MB
    max-history: 30
    total-size-cap: 1GB
    retention-days: 30

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,env
      base-path: /manage
